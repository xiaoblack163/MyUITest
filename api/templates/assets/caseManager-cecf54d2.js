import{m as De,i as le,p as Ie,r as o,w as ae,o as we,a as c,b as r,c as b,e as u,f,d as l,q as A,F as te,g as xe,s as L,t as w,k as $,v as se}from"./index-19253d00.js";const ke={class:"flex align-items-center gap-3 mb-3"},Ce={class:"font-semibold w-6rem"},Te={key:0,class:"flex align-items-center gap-3 mb-5"},Ne={class:"font-semibold w-6rem"},Le={class:"flex justify-content-end gap-2"},Me={class:"grid"},Ue={class:"col-12 md:col-3"},Ae={class:"card p-fluid"},Oe=l("h5",null,"测试功能列表",-1),Se={class:"field"},Fe={class:"field"},Ge={class:"flex align-items-center font-bold"},Be=l("i",{class:"pi pi-th-large",style:{height:"1rem","margin-right":"0.5rem"}},null,-1),He={class:"card p-fluid"},je=l("h5",null,"测试用例列表",-1),Pe=["id"],$e={class:"flex align-items-center font-bold"},qe=l("i",{class:"pi pi-star",style:{height:"1rem","margin-right":"0.5rem"}},null,-1),ze={class:"col-12 md:col-9"},Ee={class:"card p-fluid"},Ke=l("h5",null,"步骤编号与名称",-1),Xe=l("p",{class:"text-color-secondary block mb-5"},"请输入步骤编号与名称.",-1),Ye={class:"formgrid grid"},Je={class:"field col-12 md:col-4"},Qe={class:"field col-12 md:col-4"},Re={class:"field col-12 md:col-2"},We={class:"field col-12 md:col-2"},Ze={class:"card p-fluid"},el=l("h5",null,"定位方式与定位值",-1),ll=l("p",{class:"text-color-secondary block mb-5"},"请选择定位方式并填写定位值.",-1),al={class:"formgrid grid"},tl={class:"field col-12 md:col-5"},sl={key:0,class:"field col-12 md:col-5"},ol={key:1,class:"field col-12 md:col-5"},ul={key:0,class:"flex align-items-center"},nl=["src"],il=["src"],dl={key:1},cl={class:"flex align-items-center"},vl=["src"],rl={class:"field col-12 md:col-2"},pl={class:"card p-fluid"},ml=l("h5",null,"操作与断言",-1),fl=l("p",{class:"text-color-secondary block mb-5"},"请输入操作与断言.",-1),_l={class:"formgrid grid"},yl={class:"field col-12 md:col-5"},gl={class:"field col-12 md:col-5"},Vl={class:"field col-12 md:col-2"},hl={class:"card p-fluid"},bl={class:"formgrid grid"},Dl={class:"col-12 md:col-6"},Il={class:"card p-fluid"},wl=l("h5",null,"绝对坐标",-1),xl={class:"formgrid grid"},kl={class:"field col"},Cl=l("p",{class:"text-color-secondary block mb-5"},"请输入绝对定位坐标.",-1),Tl={class:"formgrid grid"},Nl={class:"field col"},Ll={class:"field col"},Ml={class:"col-12 md:col-6"},Ul={class:"card p-fluid"},Al=l("h5",null,"上传定位图片",-1),Ol={class:"card p-fluid"},Sl=l("h5",null,"步骤说明",-1),Fl=l("p",{class:"text-color-secondary block mb-5"},"请输入步骤说明.",-1),Hl={__name:"caseManager",setup(Gl){const oe=De(),O=le("storee"),i=le("utilss"),s=Ie(),S=o(),p=o(null),q=o(),y=o(),ue=async n=>{S.value.toggle(n),q.value=await i.GetFuncTest(s)},ne=async n=>{n===null?(n={funcName:"全部功能",funcID:"全部功能"},p.value={funcName:"全部功能",funcID:"全部功能"},y.value=await i.GetCaseTests(s)):y.value=await i.GetFuncCaseTest(s,n.funcID),S.value.toggle()},v=o(null),_=o(!1),m=o(null),g=o(null),d=o(null),V=o(null),ie=[{label:"添加测试用例",icon:"pi pi-plus",command:()=>{if(event.target.outerHTML.split('<span id="')[1].split("_")[0].split("<->")[0]==="全部功能")return s.add({severity:"info",summary:"信息",detail:"请选择具体测试功能!",life:3e3}),!1;_.value=!0,g.value="用例",m.value="添加测试用例",v.value=event.target.outerHTML.split('<span id="')[1].split("_")[0].split("<->")[1]}},{label:"删除测试用例",icon:"pi pi-trash",command:()=>{if(event.target.outerHTML.split('<span id="')[1].split("_")[0].split("<->")[0]==="全部功能")return s.add({severity:"info",summary:"信息",detail:"请选择具体测试功能!",life:3e3}),!1;_.value=!0,g.value="用例",m.value="删除测试用例",v.value=event.target.outerHTML.split('<span id="')[1].split("_")[0].split("<->")[1]}},{label:"重命名测试用例",icon:"pi pi-eraser",command:()=>{if(event.target.outerHTML.split('<span id="')[1].split("_")[0].split("<->")[0]==="全部功能")return s.add({severity:"info",summary:"信息",detail:"请选择具体测试功能!",life:3e3}),!1;_.value=!0,g.value="用例",m.value="重命名测试用例",v.value=event.target.outerHTML.split('<span id="')[1].split("_")[0].split("<->")[1]}}],de=async()=>{if(!d.value)return s.add({severity:"info",summary:"信息",detail:"输入值不能为空!",life:3e3}),!1;switch(m.value){case"添加测试用例":let n=se();console.log("添加测试用例",v.value,"输入值:",d.value),i.PostCaseTest(s,v.value,d.value,n),setTimeout(async()=>{y.value=await i.GetFuncCaseTest(s,v.value)},500);break;case"删除测试用例":console.log("删除测试用例",v.value,"输入值:",d.value),i.DeleteCaseTest(s,v.value,d.value),setTimeout(async()=>{y.value=await i.GetFuncCaseTest(s,v.value)},500);break;case"重命名测试用例":if(!V.value)return s.add({severity:"info",summary:"信息",detail:"输入值不能为空!",life:3e3}),console.log("输入值不能为空"),!1;console.log("重命名测试用例",v.value,"输入值1:",d.value,"输入值2:",V.value),i.PutCaseTest(s,v.value,d.value,V.value),setTimeout(async()=>{y.value=await i.GetFuncCaseTest(s,v.value)},500);break;case"新增功能":if(console.log("新增功能","输入值:",d.value),d.value==="全部功能")return s.add({severity:"info",summary:"信息",detail:"无法添加此功能!",life:3e3}),!1;i.PostFuncTest(s,d.value);break;case"删除功能":console.log("删除功能","输入值:",d.value),i.DeleteFuncTest(s,d.value),y.value=await i.GetCaseTests(s);break;case"重命名功能":if(!V.value)return s.add({severity:"info",summary:"信息",detail:"输入值不能为空!",life:3e3}),console.log("输入值不能为空"),!1;console.log("重命名功能","输入值1:",d.value,"输入值2:",V.value),i.PutFuncTest(s,d.value,V.value);break}},F=o(null),ce=[{label:"添加测试步骤",icon:"pi pi-plus",command:()=>{t.value={stepID:se(),stepName:"",locatMode:"",locatValue:"",yoloValue:"",elementNumber:1,xValue:0,yValue:0,action:"",AssertOrActionValue:"",preSleep:0,stepInfo:"",caseID:event.target.outerHTML.split('<span id="')[1].split("_")[0].split("<->")[1],caseName:event.target.outerHTML.split('<span id="')[1].split("_")[0].split("<->")[0],funcID:event.target.outerHTML.split('<span id="')[1].split("_")[0].split("<->")[2]},F.value="POST",console.log("添加测试步骤",t)}}],t=o({stepID:"",stepName:"",locatMode:"",locatValue:"",yoloValue:"",elementNumber:1,xValue:0,yValue:0,action:"",AssertOrActionValue:"",preSleep:0,stepInfo:"",caseID:"",funcID:""}),G=o(""),z=o(null),D=o(null),x=o(""),T=o(""),k=o(""),E=o(""),B=o(""),H=o(),K=o([]),j=o([]),ve=async(n,a,P)=>{H.value.toggle(n),K.value=await i.GetStepOrder(s,a,P)},re=async n=>{t.value=await i.GetCaseStepTest(s,n.stepID),G.value="获取步骤数据",T.value=t.value.locatMode,k.value=t.value.action,F.value="PUT",s.add({severity:"info",summary:"切换步骤",detail:n.stepName,life:3e3}),H.value.toggle(),n.value=null},pe=()=>{if(t.value.locatMode=T,t.value.action=k,t.value.stepID===""||t.value.stepID===null)return s.add({severity:"error",summary:"错误",detail:"步骤ID不能为空!",life:3e3}),!1;if(t.value.caseID===""||t.value.caseID===null)return s.add({severity:"error",summary:"错误",detail:"用例ID不能为空!",life:3e3}),!1;if(t.value.funcID===""||t.value.funcID===null)return s.add({severity:"error",summary:"错误",detail:"功能ID不能为空!",life:3e3}),!1;if(t.value.stepName==="")return s.add({severity:"warn",summary:"警告",detail:"步骤名称不能为空!",life:3e3}),!1;if(t.value.locatMode==="")return s.add({severity:"warn",summary:"警告",detail:"请选择定位方式!",life:3e3}),!1;if(E.value.includes(t.value.locatMode.value)&&t.value.locatValue==="")return s.add({severity:"warn",summary:"警告",detail:"请输入定位值!",life:3e3}),!1;if(t.value.locatMode.value==="目标检测"&&t.value.yoloValue==="")return s.add({severity:"warn",summary:"警告",detail:"请选择检测目标!",life:3e3}),!1;if(t.value.action==="")return s.add({severity:"warn",summary:"警告",detail:"请选择操作或者断言!",life:3e3}),!1;if(Object.keys(B.value).includes(t.value.action.value)&&t.value.AssertOrActionValue==="")return s.add({severity:"warn",summary:"警告",detail:`请输入操作或断言参数!
`+B.value[t.value.action.value],life:3e3}),!1;if(t.value.locatMode.value==="绝对坐标"&&t.value.xValue===0&&t.value.xValue===0)return s.add({severity:"warn",summary:"警告",detail:"绝对坐标错误!",life:3e3}),!1;i.PostStepData(s,F.value,t.value)},me=async n=>{if(t.value.stepID===""||t.value.stepID===null)return s.add({severity:"warn",summary:"警告",detail:"步骤ID不能为空!",life:3e3}),!1;{const a=new FormData;a.append("file",n.files[0]),i.uploadStepImg(s,t.value.stepID,a)}},fe=()=>{if(t.value.stepID===""||t.value.stepID===null)return s.add({severity:"warn",summary:"警告",detail:"步骤ID不能为空!",life:3e3}),!1;i.DeleteStepData(s,t.value.stepID)},_e=n=>{oe.require({target:n.currentTarget,message:"删除步骤?",icon:"pi pi-info-circle",rejectClass:"p-button-secondary p-button-outlined p-button-sm",acceptClass:"p-button-danger p-button-sm",rejectLabel:"取消",acceptLabel:"确认",accept:()=>{fe()},reject:()=>{console.log("取消")}})},I=o(!1),h=o(!1),X=o([]);ae(T,n=>{G.value==="切换定位方式"&&(k.value="",t.value.AssertOrActionValue="",t.value.locatValue="",t.value.yoloValue=""),n.value==="无需定位"?(D.value=x.value.无需定位,I.value=!0,h.value=!1):["文本","ID","XPATH","CSS","自定义"].includes(n.value)?(D.value=x.value.标签定位,I.value=!1,h.value=!1):n.value==="文字识别"?(D.value=x.value.坐标定位,I.value=!1,h.value=!1):["绝对坐标","图像识别"].includes(n.value)?(D.value=x.value.坐标定位,I.value=!0,h.value=!1):n.value==="目标检测"?(D.value=x.value.坐标定位,I.value=!0,h.value=!0):(D.value="",I.value=!1,h.value=!1)});const M=o(!1),Y=o([]);return ae(k,n=>{n.value==="动作链:按键"?M.value=!0:M.value=!1}),we(async()=>{p.value={funcName:"全部功能",funcID:"全部功能"},y.value=await i.GetCaseTests(s),z.value=await i.initLocation(s),x.value=await i.initAction(s),B.value=await i.checkActionValue(s),E.value=await i.checkLocatValue(s),X.value=await i.GetYoloOption(),Y.value=await i.GetKeyOption()}),(n,a)=>{const P=c("ConfirmPopup"),N=c("InputText"),C=c("Button"),ye=c("Dialog"),J=c("Listbox"),Q=c("OverlayPanel"),ge=c("ButtonGroup"),R=c("SplitButton"),W=c("CascadeSelect"),Ve=c("Image"),Z=c("Dropdown"),U=c("InputNumber"),ee=c("Textarea"),he=c("FileUpload");return r(),b(te,null,[u(P),u(ye,{visible:_.value,"onUpdate:visible":a[3]||(a[3]=e=>_.value=e),modal:"",header:m.value,style:{width:"25rem"}},{default:f(()=>[l("div",ke,[l("label",Ce,w(g.value)+"名",1),u(N,{modelValue:d.value,"onUpdate:modelValue":a[0]||(a[0]=e=>d.value=e),class:"flex-auto",autocomplete:"off"},null,8,["modelValue"])]),m.value==="重命名测试用例"||m.value==="重命名功能"?(r(),b("div",Te,[l("label",Ne,"新"+w(g.value)+"名",1),u(N,{modelValue:V.value,"onUpdate:modelValue":a[1]||(a[1]=e=>V.value=e),class:"flex-auto",autocomplete:"off"},null,8,["modelValue"])])):L("",!0),l("div",Le,[u(C,{type:"button",label:"确认",onClick:a[2]||(a[2]=e=>{de(),_.value=!1})})])]),_:1},8,["visible","header"]),u(Q,{ref_key:"op",ref:H},{default:f(()=>[u(J,{modelValue:j.value,"onUpdate:modelValue":a[4]||(a[4]=e=>j.value=e),onChange:a[5]||(a[5]=e=>re(j.value)),filter:"",options:K.value,optionLabel:"stepName",class:"w-full md:w-14rem"},null,8,["modelValue","options"])]),_:1},512),u(Q,{ref_key:"op2",ref:S},{default:f(()=>[u(J,{modelValue:p.value,"onUpdate:modelValue":a[6]||(a[6]=e=>p.value=e),onChange:a[7]||(a[7]=e=>ne(p.value)),filter:"",options:q.value,optionLabel:"funcName",class:"w-full md:w-14rem"},null,8,["modelValue","options"])]),_:1},512),l("div",Me,[l("div",Ue,[l("div",Ae,[Oe,l("div",Se,[u(ge,null,{default:f(()=>[u(C,{onClick:a[8]||(a[8]=e=>{_.value=!0,m.value="新增功能",g.value="功能"}),text:"",icon:"pi pi-plus"}),u(C,{onClick:a[9]||(a[9]=e=>{_.value=!0,m.value="删除功能",g.value="功能"}),text:"",icon:"pi pi-trash"}),u(C,{onClick:a[10]||(a[10]=e=>{_.value=!0,m.value="重命名功能",g.value="功能"}),text:"",icon:"pi pi-eraser"})]),_:1})]),l("div",Fe,[(r(),A(R,{model:ie,onClick:a[11]||(a[11]=e=>ue(e)),key:p.value.funcID,myid:p.value.funcName+"<->"+p.value.funcID,id:p.value.funcName+"<->"+p.value.funcID},{default:f(()=>[l("span",Ge,[Be,l("span",null,w(p.value.funcName),1)])]),_:1},8,["myid","id"]))])]),l("div",He,[je,(r(!0),b(te,null,xe(y.value,e=>(r(),b("div",{key:e.caseID,id:e.caseName+"<->"+e.caseID+"<->"+e.funcID,class:"field"},[(r(),A(R,{model:ce,onClick:be=>ve(be,e.funcID,e.caseID),key:e.caseID,id:e.caseName+"<->"+e.caseID+"<->"+e.funcID},{default:f(()=>[l("span",$e,[qe,l("span",null,w(e.caseName),1)])]),_:2},1032,["onClick","id"]))],8,Pe))),128))])]),l("div",ze,[l("div",Ee,[Ke,Xe,l("div",Ye,[l("div",Je,[u(N,{disabled:"",modelValue:t.value.stepID,"onUpdate:modelValue":a[12]||(a[12]=e=>t.value.stepID=e),id:"lastname1",style:{width:"100%"},type:"text",placeholder:"请输入步骤编号"},null,8,["modelValue"])]),l("div",Qe,[u(N,{id:"lastname1",modelValue:t.value.stepName,"onUpdate:modelValue":a[13]||(a[13]=e=>t.value.stepName=e),style:{width:"100%"},type:"text",placeholder:"请输入步骤名称"},null,8,["modelValue"])]),l("div",Re,[u(C,{label:"保存",onClick:pe})]),l("div",We,[u(C,{onClick:a[14]||(a[14]=e=>_e(e)),label:"删除",outlined:""})])])]),l("div",Ze,[el,ll,l("div",al,[l("div",tl,[u(W,{onChange:a[15]||(a[15]=e=>G.value="切换定位方式"),modelValue:T.value,"onUpdate:modelValue":a[16]||(a[16]=e=>T.value=e),options:z.value,style:{width:"100%"},optionLabel:"value",optionGroupLabel:"value",optionGroupChildren:["states"],placeholder:"请选择定位方式"},null,8,["modelValue","options"])]),h.value?L("",!0):(r(),b("div",sl,[u(N,{disabled:I.value,id:"lastname1",modelValue:t.value.locatValue,"onUpdate:modelValue":a[17]||(a[17]=e=>t.value.locatValue=e),style:{width:"100%"},type:"text",placeholder:"请输入定位值"},null,8,["disabled","modelValue"])])),h.value?(r(),b("div",ol,[u(Z,{modelValue:t.value.yoloValue,"onUpdate:modelValue":a[18]||(a[18]=e=>t.value.yoloValue=e),options:X.value,placeholder:"请选择检测目标"},{value:f(e=>[e.value?(r(),b("div",ul,[u(Ve,{alt:"Image",preview:""},{image:f(()=>[l("img",{src:$(O).host+"/yoloImages/"+e.value+".jpg",alt:"",width:"18"},null,8,nl)]),preview:f(()=>[l("img",{src:$(O).host+"/yoloImages/"+e.value+".jpg",alt:"",width:"500"},null,8,il)]),_:2},1024),l("div",null,w(e.value),1)])):(r(),b("span",dl,w(e.placeholder),1))]),option:f(e=>[l("div",cl,[l("img",{alt:"",src:$(O).host+"/yoloImages/"+e.option+".jpg",style:{width:"18px"}},null,8,vl),l("div",null,w(e.option),1)])]),_:1},8,["modelValue","options"])])):L("",!0),l("div",rl,[u(U,{modelValue:t.value.elementNumber,"onUpdate:modelValue":a[19]||(a[19]=e=>t.value.elementNumber=e),inputId:"minmax-buttons",placeholder:"元素序号",mode:"decimal",showButtons:"",min:1,max:100},null,8,["modelValue"])])])]),l("div",pl,[ml,fl,l("div",_l,[l("div",yl,[u(W,{modelValue:k.value,"onUpdate:modelValue":a[20]||(a[20]=e=>k.value=e),options:D.value,style:{width:"100%"},optionLabel:"value",optionGroupLabel:"value",optionGroupChildren:["states"],placeholder:"请选择操作与断言"},null,8,["modelValue","options"])]),l("div",gl,[M.value?L("",!0):(r(),A(ee,{key:0,modelValue:t.value.AssertOrActionValue,"onUpdate:modelValue":a[21]||(a[21]=e=>t.value.AssertOrActionValue=e),placeholder:"请输入操作或断言参数",style:{height:"50%"}},null,8,["modelValue"])),M.value?(r(),A(Z,{key:1,modelValue:t.value.AssertOrActionValue,"onUpdate:modelValue":a[22]||(a[22]=e=>t.value.AssertOrActionValue=e),options:Y.value,placeholder:"请选择按键"},null,8,["modelValue","options"])):L("",!0)]),l("div",Vl,[u(U,{modelValue:t.value.preSleep,"onUpdate:modelValue":a[23]||(a[23]=e=>t.value.preSleep=e),inputId:"minmax-buttons",placeholder:"执行前等待时间",mode:"decimal",showButtons:"",min:0,max:100},null,8,["modelValue"])])])]),l("div",hl,[l("div",bl,[l("div",Dl,[l("div",Il,[wl,l("div",xl,[l("div",kl,[Cl,l("div",Tl,[l("div",Nl,[u(U,{modelValue:t.value.xValue,"onUpdate:modelValue":a[24]||(a[24]=e=>t.value.xValue=e),placeholder:"请输入x坐标",min:-1920,max:1920},null,8,["modelValue"])]),l("div",Ll,[u(U,{modelValue:t.value.yValue,"onUpdate:modelValue":a[25]||(a[25]=e=>t.value.yValue=e),placeholder:"请输入y坐标",min:-1080,max:1080},null,8,["modelValue"])])])])])])]),l("div",Ml,[l("div",Ul,[Al,u(he,{name:"demo[]",showCancelButton:!1,showUploadButton:!1,fileLimit:1,onSelect:a[26]||(a[26]=e=>me(e)),accept:"image/*",maxFileSize:1e6,customUpload:""})])])])]),l("div",Ol,[Sl,Fl,u(ee,{modelValue:t.value.stepInfo,"onUpdate:modelValue":a[27]||(a[27]=e=>t.value.stepInfo=e),id:"address",rows:"4"},null,8,["modelValue"])])])])],64)}}};export{Hl as default};
